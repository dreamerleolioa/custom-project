<div *ngIf="tabInfo.isFocus">
    <div *ngIf="selectedApp != '请选择欲浏览的应用' && !isStateView">
        <div *ngIf="treeStatus == 'editted'" class="edittedTreeArea">
            <div style="text-align:left;" class="title">
                <p> <span (click)="backToFunctionAuthView()">功能总览</span> > 编辑</p>
            </div>
            <div  style="text-align:right;">
                <button class="btn btn-custom btn-primary-normal" (click)="save()">储存</button>
            </div>
        </div>

        <div *ngIf="treeStatus == 'normal'" style="padding-top:20px;padding-bottom:15px;text-align:right;border-bottom: 1px solid #999999;">
            <button class="btn btn-custom btn-primary-normal" (click)="treeStatus='editted'">编辑</button>
        </div>

        <div>
            <authTree   
                *ngFor="let item of authTreeData" 
                [menuItem]="item" 
                [editStatus]="treeStatus" 
                [withBorderBottom]="'with-borderBottom'"
                [isResult] = "false"
                [isIDShow]="true"
                (childNotification)="getNotify($event)">
            </authTree>
        </div>
    </div>

    <div *ngIf="isStateView">
        <div class="edittedTreeArea">
            <div style="text-align:left;" class="title">
                <p> <span (click)="backToFunctionAuthView()">功能总览</span> > <span (click)="isStateView = !isStateView">{{selectedAction.name}}</span> > 状态</p>
            </div>
            <div *ngIf="treeStatus == 'normal'"  style="text-align:right;">
                <button class="btn btn-custom btn-primary-normal" (click)="treeStatus='editted'">编辑</button>
            </div>
            <div *ngIf="treeStatus == 'editted'"  style="text-align:right;">
                <button class="btn btn-custom btn-primary-normal" (click)="conditionSave()">储存状态</button>
            </div>
        </div>

        <div *ngIf="treeStatus == 'normal'">
            <div class="row" *ngFor="let conditionRow of conditionList" style="margin: 0;border-bottom: 1px solid #cccccc;">
                <div class="col-md-4" *ngFor="let condition of conditionRow" style="padding: 20px 15px 10px 20px">
                    <label style="font-size: 16px;color: #cccccc;">{{ condition.name }}</label>
                    <p style="font-size: 16px;color: #333333;">{{ condition.value }}</p>
                </div>
            </div>
        </div>

        <div *ngIf="treeStatus == 'editted'">
            <div class="row" *ngFor="let conditionRow of conditionList" style="margin: 0;border-bottom: 1px solid #cccccc;">
                <div class="col-md-4" *ngFor="let condition of conditionRow" style="padding: 20px 15px 20px 20px">
                    <label style="font-size: 16px;">{{ condition.name }}</label>
                    <input *ngIf="condition.type == 'string'" type="text" class="form-control" [(ngModel)]="condition.value">
                    <input *ngIf="condition.type == 'int'" type="number" min="-2147483648" max="2147483647" class="form-control" [(ngModel)]="condition.value">
                    <select *ngIf="condition.type=='bool'" class="form-control" [(ngModel)]="condition.value">
                        <option value="true">true</option>
                        <option value="false">false</option>
                    </select>
                    <select *ngIf="condition.type == 'single'" class="form-control" [(ngModel)]="condition.value">
                        <option *ngFor="let parameter of condition.typeParameter" [value]="parameter"> {{ parameter }} </option>
                    </select>

                    <div *ngIf="condition.type == 'time'">
                        <div class="row">   
                            <div class="col-md-12">
                                <input  class="form-control"  type="date" [(ngModel)]="condition.date">
                            </div>
                        </div>

                        <div class="row" style="padding-top: 5px;">
                            <div class="col-md-3">
                                <input style="padding-left: 6px;padding-right: 6px;" class="form-control" type="number" min="0" max="24"  [(ngModel)]="condition.clock">
                            </div>
                            <div class="col-md-1" style="padding-left: 0px;padding-right: 0px;text-align: center;">
                                <label style="padding-top:8px;padding-left: 0px;padding-right: 0px;">：</label>
                            </div>
                            <div class="col-md-3">
                                <input style="padding-left: 6px;padding-right: 6px;"  class="form-control" type="number" min="0" max="60" [(ngModel)]="condition.minute">
                            </div>
                            <div class="col-md-1" style="padding-left: 0px;padding-right: 0px;text-align: center;">
                                 <label style="padding-top:8px;padding-left: 0px;padding-right: 0px;">：</label>
                            </div>
                            <div class="col-md-3">
                                <input style="padding-left: 6px;padding-right: 6px;" class="form-control" type="number" min="0" max="60" [(ngModel)]="condition.second">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 詢問開窗 -->
<ng-template #SaveModal let-c="close" let-d="dismiss">
    <div class="modal-header">
        <span class="modal-title pull-left" style="font-size: 18px;">离开编辑状态</span>
        <button type="button" class="close pull-right" aria-label="Close" (click)="c('Close click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="form-group">
            <div class="row">
                <div class="col-md-12">
                    <p style="font-size: 14px;">您的资料尚未储存，是否离开?</p>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-custom btn-primary-normal" (click)="c('Close click')">留在此页</button>
        <button class="btn btn-custom btn-primary-danger" (click)="exitThisPage()">离开此页</button>
    </div>
</ng-template>